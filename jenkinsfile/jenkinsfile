#!/usr/bin/env groovy

def pgbench_test = PGBENCH_TEST.toString().toUpperCase() 
def pgbench_test_cns_block = PGBENCH_TEST_CNS_BLOCK.toString().toUpperCase() 

node {
    // clear workspace
    deleteDir()
    // clone aos-cd-jobs repo where all the pipeline scripts exist
    sh "git clone https://github.com/ekuric/openshift"

    // run pgbench 
    if ( pgbench_test == "TRUE" ) {
	#load "openshift/jenkinsfile/pgbench.groovy"
	load "openshift/jenkinsfile/ptest.groovy"
    }
    if ( pgbench_test_cns_block == "TRUE" ) {
	load "openshift/jenkinsfile/ptest.groovy"
	#load "openshift/jenkinsfile/pgbenchcnsblock.groovy"
    } 
    if ( mongodb_ycsb_cns_block == "TRUE" ) {
	load "openshift/jenkinsfile/mongodbycsbblock.groovy"
    }  
    if ( mongodb_ycsb_cns_file == "TRUE" ) {
	load "openshift/jenkinsfile/mongodbycsbfile.groovy"
    } 
}
